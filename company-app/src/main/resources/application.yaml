server:
  port: 8082

logging:
  level:
    org.hibernate.SQL: DEBUG

# Všetko pod jedným 'spring'
spring:
  application:
    name: company-app
  profiles:
    active: dev
  threads:
    virtual:
      enabled: true

  # Konfigurácia pre DEV profil sa vkladá inak (cez activate.on-profile), 
  # ale pre jednoduchosť dajme spoločné veci sem:
  
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  kafka:
    bootstrap-servers: localhost:9092
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
      properties:
        spring.json.add.type.headers: false

  # Jackson konfigurácia (zjednotená)

  jackson:
    coercion:
      SCALAR_TO_STRING: DISALLOW
    deserialization:
      FAIL_ON_UNKNOWN_PROPERTIES: true
      FAIL_ON_TRAILING_TOKENS: true
      FAIL_ON_NULL_FOR_PRIMITIVES: true

  security:
    oauth2:
      resource server:
        jwt:
          issuer-uri: ${KEYCLOAK_SERVERURL}/realms/${KEYCLOAK_REALM}
          authorities-claim-name: roles
          authority-prefix: ROLE_